# PillSnap INIT â€” ì•„í‚¤í…ì²˜/ê³„íš ì˜¨ë³´ë”© (2025-09-19)

## ğŸ“‹ ë¬¸ì„œ ì¸ë±ìŠ¤ ìš”ì•½ (ìµœì‹  10ê°œ)

| íŒŒì¼ëª… | ê²½ë¡œ | ìˆ˜ì •ì¼ | í‚¤ì›Œë“œ |
|--------|------|--------|--------|
| CLAUDE_MEMORY.md | docs/ | 2025-09-08 | ì ˆëŒ€ ìˆ˜ì¹™ 10ê°œ, Phase ìƒíƒœ, ì¦‰ì‹œ ì‹¤í–‰ |
| API_INTEGRATION.md | docs/ | 2025-09-07 | API ì—°ë™, pillsnap.co.kr, X-Api-Key |
| ARCHITECTURE.md | docs/ | 2025-09-07 | Feature-first, Clean Architecture, ì´ë¯¸ì§€ íŒŒì´í”„ë¼ì¸ |
| IMAGE_PREPROCESSING_PIPELINE.md | docs/ | 2025-09-06 | ì´ë¯¸ì§€ í‘œì¤€í™”, 2048px, JPEG Q95, ROI |
| implementation_guide.md | docs/2025-09-05_ | 2025-09-05 | ì´¬ì˜ ë‚´ì—­, ì¦ê²¨ì°¾ê¸°, Repository êµ¬í˜„ |
| remaining_features.md | docs/2025-09-05_ | 2025-09-05 | ë‚¨ì€ ê¸°ëŠ¥, ìš°ì„ ìˆœìœ„, My Medications |
| signup-flow-fixes.md | docs/2025-01-03_ | 2025-09-05 | íšŒì›ê°€ì… í”Œë¡œìš°, ì—ëŸ¬ ì²˜ë¦¬ |
| supabase_integration.md | docs/2025-09-04_ | 2025-09-04 | Supabase ì—°ë™, ì¸ì¦, Phase 2 í…Œì´ë¸” |
| supabase_schema.md | docs/2025-09-04_ | 2025-09-04 | DB ìŠ¤í‚¤ë§ˆ, profiles, captures, favorites |
| migration_plan.md | docs/2025-09-03_ | 2025-09-03 | Phase 0-10, 14ì‹œê°„ ì˜ˆìƒ, ì²´í¬ë¦¬ìŠ¤íŠ¸ |

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê·œì¹™ (ì •ê·œí™” ë³¸ë¬¸)

### 1. í´ë” êµ¬ì¡° í‘œì¤€

**ì ˆëŒ€ ê²½ë¡œ ê·œì¹™**: `features/<feature>/{presentation,domain,data}` ê³„ì¸µ í•„ìˆ˜

```
lib/
â”œâ”€â”€ core/                       # ì•± ì „ì—­ ê³µí†µ
â”‚   â”œâ”€â”€ error/                  # exceptions.dart, failures.dart 
â”‚   â”œâ”€â”€ network/                # api_client.dart, network_info.dart
â”‚   â”œâ”€â”€ widgets/                # buttons/, cards/, loading/, dialogs/
â”‚   â”œâ”€â”€ utils/                  
â”‚   â”‚   â”œâ”€â”€ validators.dart     # ì…ë ¥ ê²€ì¦
â”‚   â”‚   â”œâ”€â”€ formatters.dart     # í¬ë§· ìœ í‹¸
â”‚   â”‚   â””â”€â”€ structured_logger.dart  # trace_id ê¸°ë°˜ ë¡œê¹…
â”‚   â”œâ”€â”€ router/                 
â”‚   â”‚   â”œâ”€â”€ app_router.dart     # go_router êµ¬ì„±
â”‚   â”‚   â””â”€â”€ route_paths.dart    # ğŸ”´ ê²½ë¡œ ìƒìˆ˜ (í•„ìˆ˜)
â”‚   â””â”€â”€ i18n/                   # êµ­ì œí™” í—¬í¼
â”œâ”€â”€ theme/                      
â”‚   â”œâ”€â”€ app_theme.dart          # Material 3 í…Œë§ˆ
â”‚   â”œâ”€â”€ app_colors.dart         # ìƒ‰ìƒ í† í°
â”‚   â”œâ”€â”€ app_typography.dart     # íƒ€ì´í¬ê·¸ë˜í”¼ í† í°  
â”‚   â”œâ”€â”€ app_spacing.dart        # xs/sm/md/lg/xl/xxl
â”‚   â””â”€â”€ app_dimensions.dart     # radius, elevation
â”œâ”€â”€ features/
â”‚   â””â”€â”€ <feature>/
â”‚       â”œâ”€â”€ presentation/       
â”‚       â”‚   â”œâ”€â”€ pages/          # í™”ë©´ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ widgets/        # ê¸°ëŠ¥ë³„ ìœ„ì ¯
â”‚       â”‚   â””â”€â”€ controllers/    # Riverpod Notifier
â”‚       â”œâ”€â”€ domain/             
â”‚       â”‚   â”œâ”€â”€ entities/       # freezed ì—”í‹°í‹°
â”‚       â”‚   â”œâ”€â”€ repositories/   # ì¸í„°í˜ì´ìŠ¤
â”‚       â”‚   â””â”€â”€ usecases/       # ë‹¨ì¼ ì±…ì„
â”‚       â””â”€â”€ data/               
â”‚           â”œâ”€â”€ datasources/    # remote/local
â”‚           â”œâ”€â”€ models/         # freezed + json_serializable
â”‚           â””â”€â”€ repositories/   # êµ¬í˜„ì²´
â””â”€â”€ l10n/                       
    â”œâ”€â”€ app_ko.arb              # í•œêµ­ì–´ (ê¸°ë³¸)
    â””â”€â”€ app_en.arb              # ì˜ì–´
```

### 2. ë¼ìš°íŒ… ê·œì¹™

- **íŒ¨í‚¤ì§€**: `go_router ^14.0.0` í•„ìˆ˜
- **ê²½ë¡œ ìƒìˆ˜**: `core/router/route_paths.dart`ì—ë§Œ ì •ì˜
- **ShellRoute**: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ìš©
- **ì¸ì¦ ê°€ë“œ**: redirect ì½œë°± í™œìš©
- **ë”¥ë§í¬**: `app_links` íŒ¨í‚¤ì§€ (uni_links X)

```dart
// route_paths.dart ì˜ˆì‹œ
class RoutePaths {
  static const login = '/login';
  static const home = '/home';
  static const camera = '/camera';
  static const drugDetail = '/drug/:id';
  static const settings = '/settings';
}
```

### 3. ìƒíƒœê´€ë¦¬ ì›ì¹™

- **Riverpod ìµœì‹  API**: `AsyncNotifier`/`Notifier`ë§Œ ì‚¬ìš©
- **ê¸ˆì§€**: StateProvider, StateNotifierProvider (ë ˆê±°ì‹œ)
- **ë„¤ì´ë°**:
  - Provider: `xxxProvider`
  - Notifier: `XxxNotifier`  
  - State: `XxxState` (freezed)

### 4. ë„ë©”ì¸ ê·œì¹™

- **Repository íŒ¨í„´**: ì¸í„°í˜ì´ìŠ¤(domain) â†’ êµ¬í˜„ì²´(data)
- **UseCase**: `call()` ë©”ì„œë“œ, ë‹¨ì¼ ì±…ì„
- **Entity**: ë¶ˆë³€, `freezed` í•„ìˆ˜
- **ì—ëŸ¬ ì²˜ë¦¬**: `Either<Failure, T>` ë˜ëŠ” ëª…ì‹œì  ì˜ˆì™¸

### 5. í…Œë§ˆ/í† í° ì‹œìŠ¤í…œ

- **í•˜ë“œì½”ë”© ê¸ˆì§€**: ëª¨ë“  ê°’ì€ í† í° ì°¸ì¡°
- **ìƒ‰ìƒ**: `AppColors.primary`, `AppColors.textPrimary`
- **ê°„ê²©**: `AppSpacing.xs/sm/md/lg/xl/xxl`
- **íƒ€ì´í¬**: `AppTextStyles.h1/h2/body`
- **ğŸ”´ withOpacity ê¸ˆì§€**: `withValues(alpha: value)` í•„ìˆ˜

### 6. êµ­ì œí™”(i18n)

- **ë„êµ¬**: Flutter gen_l10n
- **ARB**: `lib/l10n/app_ko.arb` ê¸°ë³¸
- **ë¬¸ì¥ ì œí•œ**: 2ì¤„ ì´ë‚´
- **í‚¤ ë„¤ì´ë°**: `featureName_componentName_description`

### 7. í…ŒìŠ¤íŠ¸/í’ˆì§ˆ

- **analysis_options.yaml**: Effective Dart ê·œì¹™
- **í…ŒìŠ¤íŠ¸ êµ¬ì¡°**: `test/{unit,widget,integration}/`
- **ì»¤ë²„ë¦¬ì§€**: ìµœì†Œ 80% ëª©í‘œ
- **CI**: flutter analyze, format, test í•„ìˆ˜

### 8. Phase ê³„íš

**í˜„ì¬ ì§„í–‰ ìƒíƒœ (85% ì™„ë£Œ)**:
- âœ… Phase 0-5: ì™„ë£Œ (ê¸°ë³¸ ì„¤ì •, Auth, Onboarding, Home, Camera, Drug)
- âœ… Phase 8-9: ì™„ë£Œ (ë¼ìš°íŒ… í†µí•©, i18n)
- â¸ï¸ Phase 6: Settings (ëŒ€ê¸°)
- ğŸ”„ Phase 7: ê³µí†µ ì»´í¬ë„ŒíŠ¸ (ë¶€ë¶„ ì™„ë£Œ)
- â¸ï¸ Phase 10: ìµœì¢… ê²€ì¦ (ëŒ€ê¸°)

## ğŸ“Š ì¶©ëŒÂ·ì¤‘ë³µÂ·ëˆ„ë½ ë¦¬í¬íŠ¸

| ì´ìŠˆ | ê·¼ê±° | ê¶Œê³ ì•ˆ | ë¦¬ìŠ¤í¬ |
|------|------|--------|--------|
| **ë¼ìš°íŠ¸ ìƒìˆ˜ ëˆ„ë½** | route_paths.dart íŒŒì¼ì´ ì—†ìŒ | ì¦‰ì‹œ ìƒì„± í•„ìˆ˜ | ğŸ”´ ë†’ìŒ |
| **StateNotifier ì‚¬ìš©** | ì¼ë¶€ ì½”ë“œì— ë ˆê±°ì‹œ API ì”ì¡´ | AsyncNotifierë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ | ğŸŸ¡ ì¤‘ê°„ |
| **ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì±…ì„** | í”„ë¡ íŠ¸/BFF/ì¶”ë¡ ì„œë²„ ê²½ê³„ ëª¨í˜¸ | ë¬¸ì„œëŒ€ë¡œ ëª…í™•íˆ ë¶„ë¦¬ | ğŸŸ¡ ì¤‘ê°„ |
| **withOpacity ì‚¬ìš©** | ì—¬ëŸ¬ íŒŒì¼ì—ì„œ ë°œê²¬ | withValues(alpha)ë¡œ êµì²´ | ğŸŸ¢ ë‚®ìŒ |
| **Settings í˜ì´ì§€ ë¯¸êµ¬í˜„** | Phase 6 ëŒ€ê¸° ìƒíƒœ | ìš°ì„  êµ¬í˜„ í•„ìš” | ğŸŸ¡ ì¤‘ê°„ |
| **í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¶€ì¡±** | test/ ë””ë ‰í„°ë¦¬ ë¹ˆì•½ | í•µì‹¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ì‘ì„± | ğŸŸ¡ ì¤‘ê°„ |

## âœ… ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ğŸ”´ ì¦‰ì‹œ ì‹¤í–‰ (1ì‹œê°„ ì´ë‚´)

- [ ] **ë¼ìš°íŠ¸ ìƒìˆ˜ íŒŒì¼ ìƒì„±** (ë‚œì´ë„: S, 10ë¶„, ë¸”ë¡œì»¤: ì—†ìŒ)
  ```bash
  touch lib/core/router/route_paths.dart
  # ëª¨ë“  ê²½ë¡œ ìƒìˆ˜ ë§ˆì´ê·¸ë ˆì´ì…˜
  ```

- [ ] **withOpacity â†’ withValues êµì²´** (ë‚œì´ë„: S, 20ë¶„, ë¸”ë¡œì»¤: ì—†ìŒ)
  ```bash
  grep -r "withOpacity" lib/
  # ë°œê²¬ëœ ëª¨ë“  íŒŒì¼ì—ì„œ withValues(alpha: value)ë¡œ êµì²´
  ```

- [ ] **í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í™•ì¸** (ë‚œì´ë„: S, 5ë¶„, ë¸”ë¡œì»¤: ì—†ìŒ)
  ```bash
  flutter run \
    --dart-define=API_URL=https://api.pillsnap.co.kr \
    --dart-define=API_KEY=YOUR_API_KEY_HERE \
    --dart-define=SUPABASE_URL=https://dcpuiwszzyoojgikszaa.supabase.co
  ```

### ğŸŸ¡ ë‹¨ê¸° ì‹¤í–‰ (ì˜¤ëŠ˜ ì¤‘)

- [ ] **Settings í˜ì´ì§€ êµ¬í˜„** (ë‚œì´ë„: M, 2ì‹œê°„, ë¸”ë¡œì»¤: ì—†ìŒ)
  - í”„ë¡œí•„ ê´€ë¦¬
  - ì•ŒëŸ¬ì§€ ì •ë³´
  - ì•Œë¦¼ ì„¤ì •
  - ì–¸ì–´ ë³€ê²½

- [ ] **StateNotifier â†’ AsyncNotifier ë§ˆì´ê·¸ë ˆì´ì…˜** (ë‚œì´ë„: M, 3ì‹œê°„, ë¸”ë¡œì»¤: ê¸°ì¡´ ì½”ë“œ ì˜ì¡´ì„±)
  - DrugResultNotifier
  - DrugDetailNotifier
  - CameraNotifier

- [ ] **í•µì‹¬ í…ŒìŠ¤íŠ¸ ì‘ì„±** (ë‚œì´ë„: M, 3ì‹œê°„, ë¸”ë¡œì»¤: ì—†ìŒ)
  - auth_repository_test.dart
  - drug_usecase_test.dart
  - camera_page_test.dart

### ğŸŸ¢ ì¤‘ê¸° ì‹¤í–‰ (ì´ë²ˆ ì£¼)

- [ ] **ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥ ì™„ì„±** (ë‚œì´ë„: M, 2ì‹œê°„, ë¸”ë¡œì»¤: Supabase í…Œì´ë¸”)
  - favorites í…Œì´ë¸” í™œìš©
  - UI ë²„íŠ¼ ì¶”ê°€
  - í™ˆ í™”ë©´ ì—°ë™

- [ ] **ì´¬ì˜ ë‚´ì—­ ì €ì¥** (ë‚œì´ë„: M, 2ì‹œê°„, ë¸”ë¡œì»¤: captures í…Œì´ë¸”)
  - ì´ë¯¸ì§€ ì—…ë¡œë“œ
  - ë©”íƒ€ë°ì´í„° ì €ì¥
  - íˆìŠ¤í† ë¦¬ ì¡°íšŒ

- [ ] **iOS macro ë Œì¦ˆ ì§€ì›** (ë‚œì´ë„: L, 3ì‹œê°„, ë¸”ë¡œì»¤: ë„¤ì´í‹°ë¸Œ ì½”ë“œ)
  - Swift ë¸Œë¦¿ì§€ êµ¬í˜„
  - ë Œì¦ˆ ì „í™˜ ë¡œì§

- [ ] **CI/CD íŒŒì´í”„ë¼ì¸** (ë‚œì´ë„: M, 2ì‹œê°„, ë¸”ë¡œì»¤: GitHub Actions)
  ```yaml
  - flutter analyze
  - flutter format --set-exit-if-changed
  - flutter test
  - flutter build apk/ios
  ```

## ğŸ—ºï¸ Phase ë§µí•‘

| Phase | ìƒíƒœ | Gap ë¶„ì„ | ë‚¨ì€ ì‘ì—… |
|-------|------|----------|-----------|
| 0. ê¸°ë³¸ ì„¤ì • | âœ… ì™„ë£Œ | - | - |
| 1. Auth | âœ… ì™„ë£Œ | - | - |
| 2. Onboarding | âœ… ì™„ë£Œ | - | - |
| 3. Home | âœ… ì™„ë£Œ | - | - |
| 4. Camera | âœ… ì™„ë£Œ | macro ë Œì¦ˆ ë¯¸ì§€ì› | iOS ë„¤ì´í‹°ë¸Œ ì½”ë“œ |
| 5. Drug Detail | âœ… ì™„ë£Œ | - | - |
| 6. Settings | â¸ï¸ ëŒ€ê¸° | ì „ì²´ ë¯¸êµ¬í˜„ | í˜ì´ì§€ êµ¬í˜„ |
| 7. ê³µí†µ ì»´í¬ë„ŒíŠ¸ | ğŸ”„ ì§„í–‰ | ì¼ë¶€ ìœ„ì ¯ ëˆ„ë½ | ì¶”ì¶œ ë° ì •ë¦¬ |
| 8. ë¼ìš°íŒ… í†µí•© | âœ… ì™„ë£Œ | route_paths.dart ëˆ„ë½ | ìƒìˆ˜ íŒŒì¼ ìƒì„± |
| 9. i18n | âœ… ì™„ë£Œ | - | - |
| 10. ìµœì¢… ê²€ì¦ | â¸ï¸ ëŒ€ê¸° | í…ŒìŠ¤íŠ¸ ë¶€ì¡± | í…ŒìŠ¤íŠ¸ ì‘ì„± |

## âš ï¸ ë¦¬ìŠ¤í¬/ì˜ì¡´ì„±

| í•­ëª© | ì„¤ëª… | ì˜í–¥ë„ | ëŒ€ì‘ ë°©ì•ˆ |
|------|------|--------|-----------|
| **API ì„œë²„ ì˜ì¡´ì„±** | pillsnap.co.kr ê°€ìš©ì„± | ğŸ”´ ë†’ìŒ | ì˜¤í”„ë¼ì¸ ëª¨ë“œ êµ¬í˜„ |
| **Supabase ì œí•œ** | ë¬´ë£Œ í‹°ì–´ í•œê³„ | ğŸŸ¡ ì¤‘ê°„ | ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ |
| **iOS ì‹¬ì‚¬** | ì¹´ë©”ë¼ ê¶Œí•œ ì„¤ëª… | ğŸŸ¡ ì¤‘ê°„ | ëª…í™•í•œ ì„¤ëª… ì‘ì„± |
| **ì´ë¯¸ì§€ ì²˜ë¦¬ ì„±ëŠ¥** | 2048px ë¦¬ì‚¬ì´ì§• | ğŸŸ¢ ë‚®ìŒ | Isolate í™œìš© ì¤‘ |

## ğŸ“ ê²€í†  ìš”ì²­

### A. ëª¨ìˆœ í•´ê²°ì•ˆ ì„ íƒ

**StateNotifier vs AsyncNotifier ë§ˆì´ê·¸ë ˆì´ì…˜**
- [ ] **Aì•ˆ**: ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ (ê¸°ëŠ¥ë³„ ìˆœì°¨ ì§„í–‰)
- [ ] **Bì•ˆ**: ì „ì²´ ì¼ê´„ ë§ˆì´ê·¸ë ˆì´ì…˜ (í•œë²ˆì— êµì²´)
- **ê¶Œê³ **: Aì•ˆ (ë¦¬ìŠ¤í¬ ìµœì†Œí™”)

### B. ìš°ì„  ì ìš© Phase Top 5

1. **ë¼ìš°íŠ¸ ìƒìˆ˜ íŒŒì¼ ìƒì„±** - ì¦‰ì‹œ
2. **Settings í˜ì´ì§€ êµ¬í˜„** - Phase 6
3. **í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±** - Phase 10 ì¼ë¶€
4. **ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥** - ì¶”ê°€ ê¸°ëŠ¥
5. **CI/CD ì„¤ì •** - Phase 10 ì¼ë¶€

### C. QA ì²´í¬ í•­ëª©

| í•­ëª© | ì²´í¬ | ë¹„ê³  |
|------|------|------|
| ë¬¸ì¥ ì¤„ë°”ê¿ˆ 2ì¤„ ì œí•œ | âš ï¸ | ARB íŒŒì¼ ê²€í†  í•„ìš” |
| ì ‘ê·¼ì„± (Semantics) | âŒ | ë¯¸ì ìš© |
| ë‹¤êµ­ì–´ (ko/en) | âœ… | ARB íŒŒì¼ ì¡´ì¬ |
| ë°˜ì‘í˜• (íƒœë¸”ë¦¿) | âš ï¸ | ë¶€ë¶„ ì§€ì› |
| withOpacity ì œê±° | âš ï¸ | ì¼ë¶€ ë‚¨ìŒ |
| í•˜ë“œì½”ë”© ì œê±° | âœ… | í† í° ì‚¬ìš© ì¤‘ |

---

*ë¬¸ì„œ ìƒì„±: 2025-09-19*
*ë‹¤ìŒ ê²€í† : 2025-09-20*