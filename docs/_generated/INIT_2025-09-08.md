# PillSnap INIT â€” ì•„í‚¤í…ì²˜/ê³„íš ì˜¨ë³´ë”© (2025-09-08)

## ğŸ“‹ ë¬¸ì„œ ì¸ë±ìŠ¤ ìš”ì•½ (ìµœì‹  10ê°œ)

| íŒŒì¼ëª… | ê²½ë¡œ | ìˆ˜ì •ì¼ | í‚¤ì›Œë“œ |
|--------|------|--------|--------|
| API_INTEGRATION.md | docs/ | 2025-09-07 21:56 | API ì—°ë™, ì´ë¯¸ì§€ ì „ì²˜ë¦¬, pillsnap.co.kr |
| ARCHITECTURE.md | docs/ | 2025-09-07 21:55 | Feature-first, Clean Architecture, ì´ë¯¸ì§€ íŒŒì´í”„ë¼ì¸ |
| IMAGE_PREPROCESSING_PIPELINE.md | docs/ | 2025-09-06 19:47 | ì´ë¯¸ì§€ í‘œì¤€í™”, 2048px, JPEG Q95, ROI |
| CLAUDE_MEMORY.md | docs/ | 2025-09-06 19:30 | ì ˆëŒ€ ìˆ˜ì¹™ 10ê°œ, ì¦‰ì‹œ ì‹¤í–‰, Phase ìƒíƒœ |
| implementation_guide.md | docs/2025-09-05_ | 2025-09-05 20:32 | ì´¬ì˜ ë‚´ì—­, ì¦ê²¨ì°¾ê¸°, Repository êµ¬í˜„ |
| remaining_features.md | docs/2025-09-05_ | 2025-09-05 20:30 | ë‚¨ì€ ê¸°ëŠ¥, êµ¬í˜„ ê°€ì´ë“œ |
| signup-flow-fixes.md | docs/2025-01-03_ | 2025-09-05 00:36 | íšŒì›ê°€ì… í”Œë¡œìš°, ì—ëŸ¬ ì²˜ë¦¬ |
| supabase_integration.md | docs/2025-09-04_ | 2025-09-04 20:06 | Supabase, ì¸ì¦, í…Œì´ë¸” Phase 2 |
| supabase_schema.md | docs/2025-09-04_ | 2025-09-04 19:50 | DB ìŠ¤í‚¤ë§ˆ, ë§ˆì´ê·¸ë ˆì´ì…˜ |
| flutter_architecture_guide.md | docs/2025-09-02_ | 2025-09-02 18:54 | Layered Architecture, êµ¬í˜„ íŒ¨í„´ |

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ê·œì¹™ (ì •ê·œí™” ë³¸ë¬¸)

### 1. í´ë” êµ¬ì¡° í‘œì¤€

**ì ˆëŒ€ ê·œì¹™**: `features/<feature>/{presentation,domain,data}` ê³„ì¸µ í•„ìˆ˜

```
lib/
â”œâ”€â”€ core/                       # ì•± ì „ì—­ ê³µí†µ
â”‚   â”œâ”€â”€ error/                  # ì—ëŸ¬ ì²˜ë¦¬ (exceptions, failures)
â”‚   â”œâ”€â”€ network/                # ë„¤íŠ¸ì›Œí¬ ì„¤ì • (api_client)
â”‚   â”œâ”€â”€ widgets/                # ê³µí†µ ìœ„ì ¯
â”‚   â”œâ”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ validators.dart
â”‚   â”‚   â”œâ”€â”€ formatters.dart
â”‚   â”‚   â””â”€â”€ structured_logger.dart  # êµ¬ì¡°í™” ë¡œê¹…
â”‚   â”œâ”€â”€ router/                 # go_router ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ app_router.dart     # ë¼ìš°í„° êµ¬ì„±
â”‚   â”‚   â””â”€â”€ route_paths.dart    # ğŸ”´ ë¼ìš°íŠ¸ ê²½ë¡œ ìƒìˆ˜ (í•„ìˆ˜ ìƒì„±)
â”‚   â””â”€â”€ i18n/                   # êµ­ì œí™” í—¬í¼
â”œâ”€â”€ theme/                      # ë””ìì¸ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ app_theme.dart          # Material í…Œë§ˆ
â”‚   â”œâ”€â”€ app_colors.dart         # ìƒ‰ìƒ í† í°
â”‚   â”œâ”€â”€ app_typography.dart     # íƒ€ì´í¬ê·¸ë˜í”¼
â”‚   â”œâ”€â”€ app_spacing.dart        # ê°„ê²© ì‹œìŠ¤í…œ (xs/sm/md/lg/xl/xxl)
â”‚   â””â”€â”€ app_dimensions.dart     # í¬ê¸°, ë°˜ê²½
â”œâ”€â”€ features/
â”‚   â””â”€â”€ <feature>/
â”‚       â”œâ”€â”€ presentation/       # UI ë ˆì´ì–´
â”‚       â”‚   â”œâ”€â”€ pages/          # í™”ë©´ ì»´í¬ë„ŒíŠ¸
â”‚       â”‚   â”œâ”€â”€ widgets/        # ì¬ì‚¬ìš© ìœ„ì ¯
â”‚       â”‚   â””â”€â”€ controllers/    # Riverpod Notifier
â”‚       â”œâ”€â”€ domain/             # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚       â”‚   â”œâ”€â”€ entities/       # ë„ë©”ì¸ ëª¨ë¸
â”‚       â”‚   â”œâ”€â”€ repositories/   # ì¸í„°í˜ì´ìŠ¤
â”‚       â”‚   â””â”€â”€ usecases/       # ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚       â””â”€â”€ data/               # ë°ì´í„° ë ˆì´ì–´
â”‚           â”œâ”€â”€ datasources/    # ì™¸ë¶€ ë°ì´í„° ì†ŒìŠ¤
â”‚           â”œâ”€â”€ models/         # freezed ëª¨ë¸
â”‚           â””â”€â”€ repositories/   # êµ¬í˜„ì²´
â””â”€â”€ l10n/                       # ARB íŒŒì¼
    â”œâ”€â”€ app_ko.arb              # í•œêµ­ì–´
    â””â”€â”€ app_en.arb              # ì˜ì–´
```

### 2. ë¼ìš°íŒ… ê·œì¹™

- **í•„ìˆ˜ íŒ¨í‚¤ì§€**: `go_router ^14.0.0`
- **ê²½ë¡œ ìƒìˆ˜**: `core/router/route_paths.dart`ì—ë§Œ ì •ì˜
- **ShellRoute**: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ì„ ìœ„í•œ ê³µí†µ ë ˆì´ì•„ì›ƒ
- **ë¦¬ë‹¤ì´ë ‰íŠ¸**: ì¸ì¦ ê¸°ë°˜ ê°€ë“œ ì ìš©
- **ë”¥ë§í¬**: `app_links` íŒ¨í‚¤ì§€ ì‚¬ìš© (uni_links ëŒ€ì²´)

### 3. ìƒíƒœê´€ë¦¬ ì›ì¹™

- **Riverpod ìµœì‹  API**: `AsyncNotifier`/`Notifier`ë§Œ ì‚¬ìš©
- **ê¸ˆì§€ í•­ëª©**: StateProvider, StateNotifierProvider (ë ˆê±°ì‹œ)
- **ë„¤ì´ë° ê·œì¹™**: 
  - Provider: `xxxProvider`
  - Notifier: `XxxNotifier`
  - State: `XxxState`
- **Provider ìŠ¤ì½”í”„**: ìµœìƒìœ„ ProviderScope í•„ìˆ˜

### 4. ë„ë©”ì¸ ê·œì¹™

- **Repository íŒ¨í„´**: ì¸í„°í˜ì´ìŠ¤(domain) â†’ êµ¬í˜„ì²´(data)
- **UseCase**: ë‹¨ì¼ ì±…ì„, `call()` ë©”ì„œë“œ
- **Entity**: ë¶ˆë³€ ê°ì²´, `freezed` ì‚¬ìš©
- **ì—ëŸ¬ ì²˜ë¦¬**: `Either<Failure, T>` ë˜ëŠ” ëª…ì‹œì  ì˜ˆì™¸

### 5. í…Œë§ˆ/í† í° ì‹œìŠ¤í…œ

- **í•˜ë“œì½”ë”© ê¸ˆì§€**: ëª¨ë“  ìŠ¤íƒ€ì¼ê°’ì€ í† í° ì°¸ì¡°
- **ìƒ‰ìƒ**: `AppColors.primary`, `AppColors.textPrimary`
- **ê°„ê²©**: `AppSpacing.xs/sm/md/lg/xl/xxl`
- **íƒ€ì´í¬**: `AppTextStyles.h1/h2/body`
- **ğŸ”´ withOpacity ê¸ˆì§€**: `withValues(alpha: value)` ì‚¬ìš© í•„ìˆ˜

### 6. êµ­ì œí™”(i18n)

- **ë„êµ¬**: Flutter gen_l10n
- **ARB íŒŒì¼**: `lib/l10n/app_ko.arb` (í•œêµ­ì–´ ìš°ì„ )
- **ë¬¸ì¥ ì œí•œ**: ëª¨ë“  ë¬¸ì¥ 2ì¤„ ì´ë‚´
- **í‚¤ ë„¤ì´ë°**: `snake_case` (ì˜ˆ: `login_button_text`)

### 7. í…ŒìŠ¤íŠ¸/í’ˆì§ˆ

- **ë¦°íŠ¸**: `flutter_lints ^3.0.0`
- **ë¶„ì„**: `flutter analyze` ì—ëŸ¬ 0ê°œ ìœ ì§€
- **ì½”ë“œ ìƒì„±**: `build_runner` ì‚¬ìš©
- **í…ŒìŠ¤íŠ¸ êµ¬ì¡°**: `test/{unit,widget,integration}/`

### 8. ì´ë¯¸ì§€ ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

**ì±…ì„ ë¶„ë¦¬**:
- **í”„ë¡ íŠ¸ì—”ë“œ**: ì´ë¯¸ì§€ í‘œì¤€í™” (2048px, JPEG Q95, EXIF í”½ì…€ ë°˜ì˜)
- **BFF**: ë§¤ì§ë„˜ë²„ ê²€ì¦, ì¬ì¸ì½”ë”© íŒë‹¨
- **ì¶”ë¡ ì„œë²„**: ëª¨ë¸ë³„ ì „ì²˜ë¦¬ (center-crop 768, letterbox 1024)

**ì—…ë¡œë“œ ê·œê²©**:
```dart
class UploadImageSpec {
  static const int targetLongEdge = 2048;
  static const int jpegQuality = 95;
  static const int maxFileSize = 10485760; // 10MB
}
```

### 9. Phase ì§„í–‰ ìƒíƒœ (2025-09-08 ê¸°ì¤€ - ì‹¤ì œ í™•ì¸)

- âœ… **Phase 0-5, 8-9**: ì™„ë£Œ 
  - ê¸°ë³¸ ì„¤ì •, Auth, Onboarding, Home, Camera, Drug Detail
  - ë¼ìš°íŒ… í†µí•© (route_paths.dart êµ¬í˜„ë¨)
  - i18n (ARB íŒŒì¼ ì¡´ì¬)
- ğŸ”„ **Phase 7**: ë¶€ë¶„ ì™„ë£Œ (ê³µí†µ ì»´í¬ë„ŒíŠ¸)
- â¸ï¸ **Phase 6, 10**: ëŒ€ê¸° (Settings, ìµœì¢… ê²€ì¦)

**ì „ì²´ ì§„í–‰ë¥ **: 85%

## âš ï¸ ì¶©ëŒÂ·ì¤‘ë³µÂ·ëˆ„ë½ ë¦¬í¬íŠ¸ (2025-09-08 ì—…ë°ì´íŠ¸)

| ì´ìŠˆ | ê·¼ê±° | ê¶Œê³ ì•ˆ | ë¦¬ìŠ¤í¬ |
|------|------|--------|--------|
| âœ… ~~ë¼ìš°íŠ¸ ìƒìˆ˜ íŒŒì¼ ëˆ„ë½~~ | í•´ê²°ë¨ | `route_paths.dart` êµ¬í˜„ ì™„ë£Œ | âœ… í•´ê²° |
| âœ… ~~ì¹´ë©”ë¼ ì‹¤ì œ ì´¬ì˜ ë¯¸êµ¬í˜„~~ | í•´ê²°ë¨ | camera íŒ¨í‚¤ì§€ ì—°ë™ ì™„ë£Œ | âœ… í•´ê²° |
| âœ… ~~Drug Detail í˜ì´ì§€ ë¯¸êµ¬í˜„~~ | í•´ê²°ë¨ | features/drug êµ¬í˜„ ì™„ë£Œ | âœ… í•´ê²° |
| âœ… ~~withOpacity ì‚¬ìš©~~ | í•´ê²°ë¨ | withValues(alpha) êµì²´ ì™„ë£Œ | âœ… í•´ê²° |
| **iOS macro ë Œì¦ˆ ë¯¸ì§€ì›** | MacroCameraService êµ¬í˜„ì¤‘ | ë„¤ì´í‹°ë¸Œ ì±„ë„ ì—°ë™ í•„ìš” | ğŸŸ¡ ì¤‘ê°„ |
| **Settings í˜ì´ì§€ ë¯¸êµ¬í˜„** | Phase 6 ëŒ€ê¸° ìƒíƒœ | ì¦‰ì‹œ ì°©ìˆ˜ í•„ìš” | ğŸ”´ ë†’ìŒ |
| **ë°±ì—”ë“œ ì´ì¤‘í™”** | Supabase + PillSnap API ë³‘ì¡´ | ì—­í•  ë¶„ë¦¬ ìœ ì§€ | ğŸŸ¢ ë‚®ìŒ |

## âœ… ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì—…ë°ì´íŠ¸)

### âœ… ì™„ë£Œëœ ì‘ì—…

- [x] **ë¼ìš°íŒ… ìƒìˆ˜ íŒŒì¼ ìƒì„±** - `lib/core/router/route_paths.dart` ì¡´ì¬
- [x] **l10n ì„¤ì • ë° ARB ìƒì„±** - `lib/l10n/app_ko.arb`, `app_en.arb` ì¡´ì¬
- [x] **withOpacity êµì²´** - withValues(alpha) ì‚¬ìš©ì¤‘
- [x] **Drug Detail í˜ì´ì§€ êµ¬í˜„** - `lib/features/drug/` ì™„ë£Œ
- [x] **ì¹´ë©”ë¼ ì´¬ì˜ ê¸°ëŠ¥ ì—°ë™** - camera íŒ¨í‚¤ì§€ ì—°ë™ ì™„ë£Œ

### ğŸ”´ ì¦‰ì‹œ í•„ìš” ì‘ì—… (ì´ë²ˆ ì£¼)

- [ ] **Settings í˜ì´ì§€ êµ¬í˜„** (ë‚œì´ë„: M, 2ì‹œê°„)
  - í”„ë¡œí•„ ê´€ë¦¬
  - ì•Œë¦¼ ì„¤ì •
  - ì•± ì •ë³´
  - ë¡œê·¸ì•„ì›ƒ

- [ ] **iOS macro ë Œì¦ˆ ì—°ë™** (ë‚œì´ë„: L, 3ì‹œê°„)
  - ë„¤ì´í‹°ë¸Œ Swift ì½”ë“œ ì‘ì„±
  - MethodChannel ì—°ê²°
  - MacroCameraService ì™„ì„±

- [ ] **ì‹¤ì œ API ì—°ë™ í…ŒìŠ¤íŠ¸** (ë‚œì´ë„: M, 2ì‹œê°„)
  - pillsnap.co.kr API í…ŒìŠ¤íŠ¸
  - ì´ë¯¸ì§€ ì—…ë¡œë“œ
  - ë¶„ì„ ê²°ê³¼ íŒŒì‹±

- [ ] **ì´¬ì˜ ë‚´ì—­ ì €ì¥/ì¡°íšŒ** (ë‚œì´ë„: M, 2ì‹œê°„)
  - Supabase captures í…Œì´ë¸” ì—°ë™
  - ì´ë¯¸ì§€ Storage ì—…ë¡œë“œ
  - ë‚´ì—­ ì¡°íšŒ UI

- [ ] **ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥** (ë‚œì´ë„: S, 1ì‹œê°„)
  - favorites í…Œì´ë¸” ì—°ë™
  - UI êµ¬í˜„

### ğŸŸ¢ ì¤‘ê°„ ìš°ì„ ìˆœìœ„ (ë‹¤ìŒ ì£¼)

- [ ] **ë‚´ê°€ ë¨¹ëŠ” ì•½ ë“±ë¡** (ë‚œì´ë„: M, 2ì‹œê°„)
- [ ] **ì•ŒëŸ¬ì§€ ì •ë³´ ê´€ë¦¬** (ë‚œì´ë„: S, 1ì‹œê°„)
- [ ] **ì•Œë¦¼ ì„¤ì •** (ë‚œì´ë„: M, 3ì‹œê°„)
- [ ] **ê²€ìƒ‰ ê¸°ë¡** (ë‚œì´ë„: S, 1ì‹œê°„)
- [ ] **ì•½ë¬¼ ìƒí˜¸ì‘ìš© ì²´í¬** (ë‚œì´ë„: L, 4ì‹œê°„)
- [ ] **ì˜¤í”„ë¼ì¸ ëª¨ë“œ** (ë‚œì´ë„: L, 4ì‹œê°„)

## ğŸ“Š Phase ë§µí•‘ (Gap ë¶„ì„ - ì‹¤ì œ ìƒíƒœ)

| Phase | ê³„íš í•­ëª© | í˜„ì¬ ìƒíƒœ | Gap | ì¡°ì¹˜ í•„ìš” |
|-------|-----------|-----------|-----|-----------|
| 0 | ê¸°ë³¸ ì„¤ì • | âœ… ì™„ë£Œ | 0% | - |
| 1 | Auth (ì¸ì¦) | âœ… ì™„ë£Œ | 0% | - |
| 2 | Onboarding | âœ… ì™„ë£Œ | 0% | - |
| 3 | Home | âœ… ì™„ë£Œ | 0% | - |
| 4 | Camera | âœ… ì™„ë£Œ | 0% | iOS macro ë Œì¦ˆ ì¶”ê°€ ì‘ì—…ì¤‘ |
| 5 | Drug Detail | âœ… ì™„ë£Œ | 0% | - |
| 6 | Settings | â¸ï¸ ëŒ€ê¸° | 100% | ì¦‰ì‹œ ì°©ìˆ˜ í•„ìš” |
| 7 | ê³µí†µ ì»´í¬ë„ŒíŠ¸ | ğŸ”„ ì§„í–‰ì¤‘ | 50% | ì ì§„ì  ì¶”ì¶œ |
| 8 | ë¼ìš°íŒ… í†µí•© | âœ… ì™„ë£Œ | 0% | - |
| 9 | i18n | âœ… ì™„ë£Œ | 0% | - |
| 10 | ìµœì¢… ê²€ì¦ | â¸ï¸ ëŒ€ê¸° | 100% | Phase 6 ì™„ë£Œ í›„ |

## ğŸš¨ ë¦¬ìŠ¤í¬/ì˜ì¡´ì„±

### ì™¸ë¶€ ì˜ì¡´ì„±
- **Supabase**: ì¸ì¦/ë°ì´í„° ì €ì¥ (ì„¤ì • ì™„ë£Œ)
- **PillSnap API**: ì•½í’ˆ ë¶„ì„ (https://api.pillsnap.co.kr)
- **ì¹´ë©”ë¼ ê¶Œí•œ**: iOS/Android ì„¤ì • í•„ìš”

### ê¸°ìˆ ì  ë¦¬ìŠ¤í¬
- **ì´ë¯¸ì§€ í¬ê¸°**: 10MB ì œí•œ, 2048px í‘œì¤€í™” í•„ìˆ˜
- **ë„¤íŠ¸ì›Œí¬ ì²˜ë¦¬**: ì˜¤í”„ë¼ì¸ ëª¨ë“œ ë¯¸ì§€ì›
- **iOS ë¹Œë“œ**: Xcode ì„¤ì • í•„ìš”

### ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
- ì´ë¯¸ì§€ ì „ì²˜ë¦¬ isolate ì‚¬ìš©
- drug_cache í…Œì´ë¸” í™œìš©
- ë ˆì´ì§€ ë¡œë”© ì ìš©

## ğŸ“± ë°±ì—”ë“œ ì •ë³´

### PillSnap API
- **URL**: https://api.pillsnap.co.kr
- **Key**: YOUR_API_KEY_HERE
- **ìš©ë„**: ì•½í’ˆ ì´ë¯¸ì§€ ë¶„ì„, ì•½í’ˆ ì •ë³´ ì¡°íšŒ

### Supabase
- **URL**: https://dcpuiwszzyoojgikszaa.supabase.co
- **Anon Key**: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
- **ìš©ë„**: ì‚¬ìš©ì ì¸ì¦, ë°ì´í„° ì €ì¥
- **í…Œì´ë¸”**: profiles, captures, favorites, medications ë“± 10ê°œ

## ğŸ” ê²€í†  ìš”ì²­

### A. ëª¨ìˆœ í•´ê²°ì•ˆ ì„ íƒ

**ì´ìŠˆ**: ë°±ì—”ë“œ ì´ì¤‘í™” (Supabase + API)
- **ì˜µì…˜ A**: Supabase ì¸ì¦/ì €ì¥, API ë¶„ì„ ì—­í•  ë¶„ë¦¬ âœ… (ê¶Œì¥)
- **ì˜µì…˜ B**: Supabaseë¡œ ì™„ì „ í†µí•©

### B. ìš°ì„  ì ìš© Phase Top 5

1. **route_paths.dart ìƒì„±** - ë¸”ë¡œì»¤ í•´ê²°
2. **Drug Detail í˜ì´ì§€** - í•µì‹¬ ê¸°ëŠ¥
3. **ì¹´ë©”ë¼ ì‹¤ì œ ì´¬ì˜** - í•µì‹¬ ê¸°ëŠ¥
4. **l10n ì„¤ì •** - ê¸°ë°˜ ì‘ì—…
5. **ì´¬ì˜ ë‚´ì—­ ì €ì¥** - ë°ì´í„° ê´€ë¦¬

### C. QA ì²´í¬ í•­ëª©

| í•­ëª© | ì²´í¬ | ë¹„ê³  |
|------|------|------|
| ë¬¸ì¥ 2ì¤„ ì œí•œ | âš ï¸ | ARB íŒŒì¼ ê²€í†  í•„ìš” |
| ì ‘ê·¼ì„± | âš ï¸ | Semantics ì¶”ê°€ í•„ìš” |
| ë‹¤êµ­ì–´ (ko/en) | ğŸ”„ | ARB íŒŒì¼ ì‘ì„± ì¤‘ |
| ë°˜ì‘í˜• | âœ… | LayoutBuilder ì‚¬ìš© |
| withOpacity ì œê±° | âš ï¸ | ê²€ìƒ‰ í›„ êµì²´ í•„ìš” |
| í•˜ë“œì½”ë”© ì œê±° | ğŸ”„ | í…Œë§ˆ í† í° ì ìš© ì¤‘ |

---

**ì‘ì„±ì¼**: 2025-09-08  
**ê²€í† ì**: PillSnap Engineering Team  
**ë‹¤ìŒ ì—…ë°ì´íŠ¸**: Phase 5 ì™„ë£Œ í›„