# PillSnap INIT â€” ì•„í‚¤í…ì²˜/ê³„íš ì˜¨ë³´ë”© (2025-09-05)

## 1. ë¬¸ì„œ ì¸ë±ìŠ¤ ìš”ì•½ (ìµœì‹  10ê°œ)

| íŒŒì¼ëª… | ê²½ë¡œ | ìˆ˜ì •ì¼ | í‚¤ì›Œë“œ |
|--------|------|--------|---------|
| `2025-09-05_implementation_guide.md` | `docs/` | 2025-09-05 | ê¸°ëŠ¥êµ¬í˜„ê°€ì´ë“œ, ì´¬ì˜ë‚´ì—­, ì¦ê²¨ì°¾ê¸° |
| `2025-09-05_remaining_features_implementation.md` | `docs/` | 2025-09-05 | ë‚¨ì€ê¸°ëŠ¥ëª…ì„¸, ìš°ì„ ìˆœìœ„ë§¤íŠ¸ë¦­ìŠ¤ |
| `CLAUDE_MEMORY.md` | `docs/` | 2025-09-05 | ì ˆëŒ€ìˆ˜ì¹™10ê°œ, withOpacityê¸ˆì§€, ì¦‰ì‹œì‹¤í–‰ |
| `2025-01-03_signup-flow-fixes.md` | `docs/` | 2025-09-05 | íšŒì›ê°€ì…í”Œë¡œìš°, ì´ë©”ì¼ì¸ì¦ |
| `2025-09-04_supabase_integration.md` | `docs/` | 2025-09-04 | Supabaseì—°ë™, app_links, ë”¥ë§í¬ |
| `2025-09-04_supabase_schema.md` | `docs/` | 2025-09-04 | DBìŠ¤í‚¤ë§ˆ, RLSì •ì±…, 8ê°œì¶”ê°€í…Œì´ë¸” |
| `camera_modifications_log.md` | `docs/` | 2025-09-03 | ì¹´ë©”ë¼ë‹¨ìˆœí™”, iOSë Œì¦ˆì œê±° |
| `ARCHITECTURE.md` | `docs/` | 2025-09-03 | Clean Architecture, ë ˆì´ì–´ë¶„ë¦¬ |
| `2025-09-03_pillsnap_migration_plan.md` | `docs/` | 2025-09-03 | 10Phaseê³„íš, 14ì‹œê°„ì˜ˆìƒ |
| `2025-09-02_flutter_architecture_guide.md` | `docs/` | 2025-09-02 | Feature-first, ìƒì„¸êµ¬í˜„ê°€ì´ë“œ |

## 2. ì•„í‚¤í…ì²˜ ê·œì¹™ (ì •ê·œí™” ë³¸ë¬¸)

### 2.1 í´ë” êµ¬ì¡° í‘œì¤€

```
lib/
â”œâ”€â”€ core/                       # ì•± ì „ì—­ ê³µí†µ
â”‚   â”œâ”€â”€ config/                 # AppConfig (--dart-define)
â”‚   â”œâ”€â”€ error/                  # exceptions.dart, failures.dart
â”‚   â”œâ”€â”€ network/                # api_client.dart
â”‚   â”œâ”€â”€ services/               # supabase_service.dart
â”‚   â”œâ”€â”€ widgets/                # ê³µí†µ ìœ„ì ¯
â”‚   â”œâ”€â”€ utils/                  # validators, formatters
â”‚   â”œâ”€â”€ router/                 # âœ… ì´ë¯¸ êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ app_router.dart    # go_router ì„¤ì •
â”‚   â”‚   â””â”€â”€ route_paths.dart   # ë¼ìš°íŠ¸ ìƒìˆ˜
â”‚   â””â”€â”€ i18n/                   # l10n_extensions.dart
â”œâ”€â”€ theme/                      # ë””ìì¸ í† í°
â”‚   â”œâ”€â”€ app_colors.dart        # ìƒ‰ìƒ í† í°
â”‚   â”œâ”€â”€ app_typography.dart    # íƒ€ì´í¬ê·¸ë˜í”¼
â”‚   â”œâ”€â”€ app_spacing.dart       # ê°„ê²© ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ app_theme.dart         # Material í…Œë§ˆ
â”œâ”€â”€ features/                   # Feature ëª¨ë“ˆ
â”‚   â””â”€â”€ <feature>/
â”‚       â”œâ”€â”€ data/              
â”‚       â”‚   â”œâ”€â”€ datasources/
â”‚       â”‚   â”œâ”€â”€ models/        # freezed + json_serializable
â”‚       â”‚   â””â”€â”€ repositories/  # Repository êµ¬í˜„ì²´
â”‚       â”œâ”€â”€ domain/            
â”‚       â”‚   â”œâ”€â”€ entities/      # ë¶ˆë³€ ì—”í‹°í‹°
â”‚       â”‚   â”œâ”€â”€ repositories/  # Repository ì¸í„°í˜ì´ìŠ¤
â”‚       â”‚   â””â”€â”€ usecases/      # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚       â””â”€â”€ presentation/      
â”‚           â”œâ”€â”€ controllers/   # Riverpod AsyncNotifier/Notifier
â”‚           â”œâ”€â”€ providers/     # Provider ì •ì˜
â”‚           â”œâ”€â”€ pages/         # í™”ë©´
â”‚           â””â”€â”€ widgets/       # í™”ë©´ë³„ ìœ„ì ¯
â”œâ”€â”€ l10n/                      # âœ… ì´ë¯¸ êµ¬í˜„
â”‚   â”œâ”€â”€ app_ko.arb            
â”‚   â””â”€â”€ app_en.arb            
â””â”€â”€ main.dart
```

### 2.2 ë¼ìš°íŒ… ê·œì¹™

- **í”„ë ˆì„ì›Œí¬**: `go_router` ^14.0.0 âœ… êµ¬í˜„ ì™„ë£Œ
- **ê²½ë¡œ ìƒìˆ˜**: `core/router/route_paths.dart` âœ… êµ¬í˜„ ì™„ë£Œ
- **êµ¬ì¡°**: `ShellRoute` ë©”ì¸ ë ˆì´ì•„ì›ƒ âœ… ì ìš©ë¨
- **ì¸ì¦ ê°€ë“œ**: Supabase ì„¸ì…˜ ê¸°ë°˜ `redirect` âœ… êµ¬í˜„ë¨
- **ë”¥ë§í¬**: `app_links` íŒ¨í‚¤ì§€ (uni_links ëŒ€ì²´) âœ… ì ìš©ë¨
- **ë„¤ì´ë°**: ê²½ë¡œ kebab-case, ì´ë¦„ camelCase

### 2.3 ìƒíƒœê´€ë¦¬ ì›ì¹™

- **í•„ìˆ˜**: Riverpod 2.5+ `AsyncNotifier`/`Notifier` 
- **ê¸ˆì§€**: `StateProvider`, `StateNotifierProvider` (ë ˆê±°ì‹œ)
- **íŒ¨í„´**: Featureë³„ Controller/Notifier
- **ë„¤ì´ë°**: `XxxNotifier`, `xxxControllerProvider`
- **ìœ„ì¹˜**: `presentation/providers/` ë˜ëŠ” `presentation/controllers/`

### 2.4 ë„ë©”ì¸ ê·œì¹™

- **Repository íŒ¨í„´**: ì¸í„°í˜ì´ìŠ¤(domain) â†’ êµ¬í˜„(data)
- **UseCase**: ë‹¨ì¼ ì±…ì„, `call()` ë©”ì„œë“œ
- **Entity**: `freezed` ë¶ˆë³€ ê°ì²´ í•„ìˆ˜
- **ì—ëŸ¬ì²˜ë¦¬**: `Either<Failure, T>` ë˜ëŠ” `try-catch`
- **ë³€í™˜**: `toEntity()`, `fromEntity()`, `toJson()`, `fromJson()`

### 2.5 í…Œë§ˆ/í† í° ì‹œìŠ¤í…œ

- **ì ˆëŒ€ê¸ˆì§€**: í•˜ë“œì½”ë”©ëœ ìƒ‰ìƒ/í¬ê¸°/ê°„ê²©
- **í•„ìˆ˜ì‚¬ìš©**: 
  - `AppColors.primary`, `AppColors.textPrimary`
  - `AppSpacing.md`, `AppSpacing.lg`
  - `AppTypography.h1`, `AppTypography.body`
- **íŠ¹ë³„ì£¼ì˜**: `withOpacity` ê¸ˆì§€ â†’ `withValues(alpha: value)` ì‚¬ìš©
- **ë³´ë”ë°˜ê²½**: ì¼ê´€ëœ 12px (`BorderRadius.circular(12)`)

### 2.6 êµ­ì œí™”(i18n)

- **ì„¤ì •**: `l10n.yaml` âœ… êµ¬í˜„ ì™„ë£Œ
- **ARB íŒŒì¼**: `lib/l10n/app_ko.arb` (í…œí”Œë¦¿) âœ… êµ¬í˜„ ì™„ë£Œ
- **ë¬¸ì¥ ì œí•œ**: ëª¨ë“  ë¬¸ì¥ 2ì¤„ ì´ë‚´ í•„ìˆ˜
- **ì ‘ê·¼**: `AppLocalizations.of(context)!.í‚¤`

### 2.7 í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
test/
â”œâ”€â”€ unit/              # UseCase, Repository í…ŒìŠ¤íŠ¸
â”œâ”€â”€ widget/            # í™”ë©´/ìœ„ì ¯ í…ŒìŠ¤íŠ¸
â””â”€â”€ integration/       # ë¼ìš°íŒ…/í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```

### 2.8 Supabase í†µí•©

- **ì„œë¹„ìŠ¤**: `SupabaseService.instance` ì‹±ê¸€í†¤
- **ì¸ì¦**: ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸, ì´ë©”ì¼ ì¸ì¦ í•„ìˆ˜
- **ë¹„ë°€ë²ˆí˜¸**: 8ì+ëŒ€ë¬¸ì+ì†Œë¬¸ì+ìˆ«ì+íŠ¹ìˆ˜ë¬¸ì
- **í…Œì´ë¸”**: profiles, captures, favorites ë“± 8ê°œ ì¶”ê°€
- **ì‹¤í–‰**: `--dart-define` í™˜ê²½ë³€ìˆ˜ í•„ìˆ˜

## 3. ì¶©ëŒÂ·ì¤‘ë³µÂ·ëˆ„ë½ ë¦¬í¬íŠ¸

| ì´ìŠˆ | ê·¼ê±° | ê¶Œê³ ì•ˆ | ë¦¬ìŠ¤í¬ |
|------|------|--------|--------|
| withOpacity ì‚¬ìš© ì—¬ë¶€ | CLAUDE_MEMORY ê¸ˆì§€ ëª…ì‹œ | ì „ì²´ ê²€ìƒ‰ í›„ êµì²´ | ë‚®ìŒ (í˜„ì¬ 0ê±´) |
| StateProvider ì‚¬ìš© | migration_planì— ê¸ˆì§€ ëª…ì‹œ | AsyncNotifier ì „í™˜ | ì¤‘ê°„ |
| ë¬¸ì¥ 2ì¤„ ì œí•œ | i18n ê·œì¹™ | ARB íŒŒì¼ ì „ì²´ ê²€í†  | ë‚®ìŒ |
| Route ìƒìˆ˜í™” | route_paths.dart ìˆìŒ | í•˜ë“œì½”ë”© ê²½ë¡œ ì œê±° | ë‚®ìŒ |
| í…ŒìŠ¤íŠ¸ êµ¬ì¡° | test/ í´ë” ë¯¸í™•ì¸ | êµ¬ì¡° ìƒì„± í•„ìš” | ì¤‘ê°„ |

## 4. ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¦‰ì‹œ ì‹¤í–‰ (S - 30ë¶„ ì´ë‚´)

- [x] `lib/core/router/route_paths.dart` í™•ì¸ âœ… ì´ë¯¸ ìˆìŒ
- [x] `l10n.yaml` ì„¤ì • í™•ì¸ âœ… ì´ë¯¸ ìˆìŒ
- [ ] withOpacity ê²€ìƒ‰ ë° êµì²´ (0ê±´ì´ì§€ë§Œ ì¬í™•ì¸)
- [ ] Flutter analyze ì‹¤í–‰ ë° ì—ëŸ¬ í•´ê²°
- [ ] pubspec.yaml scripts ì„¹ì…˜ ì¶”ê°€

### ë‹¨ê¸° ì‘ì—… (M - 2ì‹œê°„)

- [ ] **ì´¬ì˜ ë‚´ì—­ ì €ì¥/ì¡°íšŒ** êµ¬í˜„
  - [ ] `CaptureRepository` êµ¬í˜„
  - [ ] Provider ì„¤ì •
  - [ ] í™ˆ í™”ë©´ ì—°ë™
- [ ] **ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥** êµ¬í˜„  
  - [ ] `FavoritesRepository` êµ¬í˜„
  - [ ] ì•½í’ˆ ìƒì„¸ í˜ì´ì§€ ë²„íŠ¼ ì¶”ê°€
  - [ ] ì¦ê²¨ì°¾ê¸° ëª©ë¡ í˜ì´ì§€
- [ ] StateProvider â†’ AsyncNotifier ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] í…ŒìŠ¤íŠ¸ í´ë” êµ¬ì¡° ìƒì„±

### ì¥ê¸° ì‘ì—… (L - 1ì¼ ì´ìƒ)

- [ ] **ë‚´ê°€ ë¨¹ëŠ” ì•½** ì „ì²´ êµ¬í˜„
  - [ ] DB ìŠ¤í‚¤ë§ˆ êµ¬í˜„
  - [ ] ì•½ë¬¼ ê²€ìƒ‰ API ì—°ë™
  - [ ] UI í˜ì´ì§€ 3ê°œ êµ¬í˜„
- [ ] **ë³µì•½ ì•Œë¦¼** ì„œë¹„ìŠ¤
  - [ ] flutter_local_notifications ì„¤ì •
  - [ ] ìŠ¤ì¼€ì¤„ë§ ë¡œì§
  - [ ] ì•Œë¦¼ UI
- [ ] **ì•ŒëŸ¬ì§€ ì •ë³´** ê´€ë¦¬
  - [ ] í”„ë¡œí•„ ì„¤ì • UI
  - [ ] ì•½í’ˆ ë¶„ì„ ì‹œ ì²´í¬

## 5. Phase ë§µí•‘ (í˜„ì¬ vs ê³„íš)

| Phase | ê³„íš | í˜„ì¬ ìƒíƒœ | Gap |
|-------|------|----------|-----|
| Phase 0 | ê¸°ë³¸ ì„¤ì • | âœ… ì™„ë£Œ | - |
| Phase 1 | Auth í™”ë©´ | âœ… ì™„ë£Œ (Supabase ì—°ë™) | - |
| Phase 2 | Onboarding | âœ… ì™„ë£Œ | - |
| Phase 3 | Home í™”ë©´ | âœ… ì™„ë£Œ | ë°ì´í„° ì—°ë™ í•„ìš” |
| Phase 4 | Camera í™”ë©´ | âœ… UI ì™„ë£Œ | ì‹¤ì œ ì´¬ì˜ êµ¬í˜„ í•„ìš” |
| Phase 5 | Drug Detail | â¸ï¸ ëŒ€ê¸° | ì „ì²´ êµ¬í˜„ í•„ìš” |
| Phase 6 | Settings | â¸ï¸ ëŒ€ê¸° | ì „ì²´ êµ¬í˜„ í•„ìš” |
| Phase 7 | ê³µí†µ ì»´í¬ë„ŒíŠ¸ | ğŸ”„ ë¶€ë¶„ ì™„ë£Œ | ì¶”ì¶œ ì‘ì—… í•„ìš” |
| Phase 8 | ë¼ìš°íŒ… í†µí•© | âœ… ì™„ë£Œ | - |
| Phase 9 | i18n ì ìš© | ğŸ”„ ë¶€ë¶„ ì™„ë£Œ | ì „ì²´ ë¬¸ìì—´ êµì²´ |
| Phase 10 | ìµœì¢… ê²€ì¦ | â¸ï¸ ëŒ€ê¸° | CI/CD ì„¤ì • í•„ìš” |

**ì§„í–‰ë¥ **: ì•½ 65% ì™„ë£Œ

## 6. ë¦¬ìŠ¤í¬/ì˜ì¡´ì„±

### ì™¸ë¶€ ì˜ì¡´ì„±
- **Supabase**: í™˜ê²½ë³€ìˆ˜ ì„¤ì • í•„ìˆ˜ (`--dart-define`)
- **API**: pillsnap.co.kr API í‚¤ í•„ìš”
- **ì¹´ë©”ë¼**: camera íŒ¨í‚¤ì§€ ì‹¤ì œ êµ¬í˜„ ëŒ€ê¸°

### ì„±ëŠ¥ ë¦¬ìŠ¤í¬
- ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬ê¸° ì œí•œ (50MB)
- ì´¬ì˜ ë‚´ì—­ í˜ì´ì§€ë„¤ì´ì…˜ í•„ìš”
- ì˜¤í”„ë¼ì¸ ëª¨ë“œ ìºì‹± ì „ëµ

### ê¶Œí•œ ì´ìŠˆ
- iOS: Info.plist ì¹´ë©”ë¼/ê°¤ëŸ¬ë¦¬ ê¶Œí•œ
- Android: AndroidManifest.xml ê¶Œí•œ

## 7. ê²€í†  ìš”ì²­

### A. ê²°ì • í•„ìš” ì‚¬í•­

#### 1. ìƒíƒœê´€ë¦¬ ë§ˆì´ê·¸ë ˆì´ì…˜
- **ì˜µì…˜ A**: ê¸°ì¡´ StateProvider ìœ ì§€í•˜ê³  ìƒˆ ê¸°ëŠ¥ë§Œ AsyncNotifier
- **ì˜µì…˜ B**: ì „ì²´ StateProvider â†’ AsyncNotifier ì¦‰ì‹œ ì „í™˜
- **ê¶Œê³ **: ì˜µì…˜ A (ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜)

#### 2. í…ŒìŠ¤íŠ¸ ì „ëµ
- **ì˜µì…˜ A**: ìœ ë‹› í…ŒìŠ¤íŠ¸ ìš°ì„ 
- **ì˜µì…˜ B**: í†µí•© í…ŒìŠ¤íŠ¸ ìš°ì„ 
- **ê¶Œê³ **: ì˜µì…˜ A (ìœ ë‹› í…ŒìŠ¤íŠ¸ ê¸°ë°˜ êµ¬ì¶•)

### B. ìš°ì„  ì ìš© Phase Top 5

1. **ì´¬ì˜ ë‚´ì—­ ì €ì¥/ì¡°íšŒ** - í•µì‹¬ ê¸°ëŠ¥, ë‚œì´ë„ ë‚®ìŒ
2. **ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥** - ì‚¬ìš©ì ìš”êµ¬ ë†’ìŒ, êµ¬í˜„ ê°„ë‹¨
3. **ë‚´ê°€ ë¨¹ëŠ” ì•½ ë“±ë¡** - í•µì‹¬ ê¸°ëŠ¥, ì¤‘ê°„ ë‚œì´ë„
4. **ì•ŒëŸ¬ì§€ ì •ë³´ ê´€ë¦¬** - ì•ˆì „ ì¤‘ìš”, êµ¬í˜„ ê°„ë‹¨
5. **Drug Detail ì™„ì„±** - Phase 5 ë§ˆë¬´ë¦¬

### C. QA ì²´í¬ í•­ëª©

| í•­ëª© | ì²´í¬ | ë¹„ê³  |
|------|------|------|
| ë¬¸ì¥ 2ì¤„ ì œí•œ | âš ï¸ | ARB íŒŒì¼ ê²€í†  í•„ìš” |
| ì ‘ê·¼ì„± (Semantics) | âŒ | êµ¬í˜„ í•„ìš” |
| ë‹¤êµ­ì–´ (ko/en) | ğŸ”„ | ë¶€ë¶„ ì™„ë£Œ |
| ë°˜ì‘í˜• (íƒœë¸”ë¦¿) | âŒ | ë¯¸êµ¬í˜„ |
| withOpacity ê¸ˆì§€ | âœ… | 0ê±´ í™•ì¸ |
| í•˜ë“œì½”ë”© ìƒ‰ìƒ | âš ï¸ | ì¬ê²€í†  í•„ìš” |

## ğŸ“‹ ì¦‰ì‹œ ì‹¤í–‰ ëª…ë ¹ì–´

```bash
# 1. ë¦°íŠ¸ ë° ë¶„ì„
flutter analyze

# 2. ì½”ë“œ ìƒì„±
flutter pub run build_runner build --delete-conflicting-outputs

# 3. êµ­ì œí™” ìƒì„±
flutter gen-l10n

# 4. Supabase ì‹¤í–‰
flutter run \
  --dart-define=API_URL=https://api.pillsnap.co.kr \
  --dart-define=API_KEY=YOUR_API_KEY_HERE \
  --dart-define=SUPABASE_URL=https://dcpuiwszzyoojgikszaa.supabase.co \
  --dart-define=SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY_HERE

# 5. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
flutter test

# 6. ë¹Œë“œ
flutter build apk
flutter build ios
```

---

*ë¬¸ì„œ ìƒì„±: 2025-09-05*
*ë„êµ¬: Claude Code INIT*
*ë²„ì „: v2*